@{
    ViewBag.Title = "Confirmación de Factura";
    var jsonNombre = ViewBag.JsonNombre as string ?? "DTE.json";
    var pdfNombre = ViewBag.PdfNombre as string ?? "DTE.pdf";
    var jsonContenido = ViewBag.Json as string;
}

<div class="factura-card mt-4">
    <div class="factura-header text-center">
        <img src="~/images/logo-digifactura.png" alt="Logo DigiFactura SV" width="60" class="mb-2" />
        <h4 class="mb-0">DigiFactura SV</h4>
        <small>Confirmación de Documento Tributario Electrónico</small>
    </div>

    <div class="mt-4">
        <h2 class="text-success">✅ Factura generada correctamente</h2>
        <p>Tu Documento Tributario Electrónico ha sido creado con éxito.</p>

        <div class="mt-3">
            <a href="~/files/@ViewBag.JsonNombre" class="btn btn-primary" download>
                Descargar JSON (@ViewBag.JsonNombre)
            </a>
        </div>

        <div class="mt-2">
            <a href="~/files/@ViewBag.PdfNombre" class="btn btn-success" target="_blank">
                Ver/Descargar PDF (@ViewBag.PdfNombre)
            </a>
        </div>

        <hr class="mt-4" />

        <h4>Vista previa del JSON</h4>

        @if (!string.IsNullOrEmpty(jsonContenido))
        {
            <pre style="background-color: #f8f8f8; padding: 10px; border: 1px solid #ccc; max-height: 400px; overflow-y: auto;">
    @Html.Raw(jsonContenido)
        </pre>
        }
        else
        {
            <div class="alert alert-warning">⚠️ No se pudo generar la vista previa del JSON.</div>
        }

</div>
